import{r as i,f as xe,u as Se,j as n}from"./app-B-KuB5wc.js";import{d as we,u as H,g as ye}from"./AppLayout-BLo0ibUD.js";import{g as Ce,a as ve,u as De,C as u,O as Oe}from"./OptionsDropdown-Cv_XuTlm.js";import{a as z}from"./Title-DWCmXiXN.js";function Pe(p){const f=i.useRef(void 0);return i.useEffect(()=>{f.current=p},[p]),f.current}const Ie={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},L=xe((p,f)=>{const _=Se("Select",Ie,p),{classNames:U,styles:W,unstyled:h,vars:je,dropdownOpened:$,defaultDropdownOpened:q,onDropdownClose:w,onDropdownOpen:y,onFocus:C,onBlur:v,onClick:D,onChange:G,data:k,value:m,defaultValue:J,selectFirstOptionOnChange:O,onOptionSubmit:P,comboboxProps:K,readOnly:b,disabled:g,filter:Q,limit:X,withScrollArea:Y,maxDropdownHeight:Z,size:x,searchable:a,rightSection:ee,checkIconPosition:te,withCheckIcon:oe,nothingFoundMessage:F,name:se,form:le,searchValue:ne,defaultSearchValue:ae,onSearchChange:re,allowDeselect:ce,error:N,rightSectionPointerEvents:ue,id:ie,clearable:de,clearButtonProps:pe,hiddenInputProps:fe,renderOption:he,onClear:I,autoComplete:me,scrollAreaProps:be,...S}=_,j=i.useMemo(()=>Ce(k),[k]),d=i.useMemo(()=>ve(j),[j]),B=we(ie),[s,A,ge]=H({value:m,defaultValue:J,finalValue:null,onChange:G}),t=typeof s=="string"?d[s]:void 0,r=Pe(t),[V,c]=H({value:ne,defaultValue:ae,finalValue:t?t.label:"",onChange:re}),o=De({opened:$,defaultOpened:q,onDropdownOpen:()=>{y==null||y(),o.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{w==null||w(),o.resetSelectedOption()}}),{resolvedClassNames:M,resolvedStyles:R}=ye({props:_,styles:W,classNames:U});i.useEffect(()=>{O&&o.selectFirstOption()},[O,s]),i.useEffect(()=>{m===null&&c(""),typeof m=="string"&&t&&((r==null?void 0:r.value)!==t.value||(r==null?void 0:r.label)!==t.label)&&c(t.label)},[m,t]);const T=de&&!!s&&!g&&!b&&n.jsx(u.ClearButton,{size:x,...pe,onClear:()=>{A(null,null),c(""),I==null||I()}});return n.jsxs(n.Fragment,{children:[n.jsxs(u,{store:o,__staticSelector:"Select",classNames:M,styles:R,unstyled:h,readOnly:b,onOptionSubmit:e=>{P==null||P(e);const l=ce&&d[e].value===s?null:d[e],E=l?l.value:null;E!==s&&A(E,l),!ge&&c(typeof E=="string"&&(l==null?void 0:l.label)||""),o.closeDropdown()},size:x,...K,children:[n.jsx(u.Target,{targetType:a?"input":"button",autoComplete:me,children:n.jsx(z,{id:B,ref:f,rightSection:ee||T||n.jsx(u.Chevron,{size:x,error:N,unstyled:h}),rightSectionPointerEvents:ue||(T?"all":"none"),...S,size:x,__staticSelector:"Select",disabled:g,readOnly:b||!a,value:V,onChange:e=>{c(e.currentTarget.value),o.openDropdown(),O&&o.selectFirstOption()},onFocus:e=>{a&&o.openDropdown(),C==null||C(e)},onBlur:e=>{var l;a&&o.closeDropdown(),c(s!=null&&((l=d[s])==null?void 0:l.label)||""),v==null||v(e)},onClick:e=>{a?o.openDropdown():o.toggleDropdown(),D==null||D(e)},classNames:M,styles:R,unstyled:h,pointer:!a,error:N})}),n.jsx(Oe,{data:j,hidden:b||g,filter:Q,search:V,limit:X,hiddenWhenEmpty:!F,withScrollArea:Y,maxDropdownHeight:Z,filterOptions:a&&(t==null?void 0:t.label)!==V,value:s,checkIconPosition:te,withCheckIcon:oe,nothingFoundMessage:F,unstyled:h,labelId:S.label?`${B}-label`:void 0,"aria-label":S.label?void 0:S["aria-label"],renderOption:he,scrollAreaProps:be})]}),n.jsx(u.HiddenInput,{value:s,name:se,form:le,disabled:g,...fe})]})});L.classes={...z.classes,...u.classes};L.displayName="@mantine/core/Select";export{L as S};
